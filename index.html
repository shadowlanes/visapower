<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Meta Tags for SEO -->
    <meta name="description" content="VisaPower helps you check visa requirements for different countries.">
    <meta name="keywords" content="visa, travel, requirements, passport">
    <meta name="author" content="shadowlanes">
    <meta property="og:title" content="VisaPower - Check Visa Requirements Instantly">
    <!-- Open Graph Meta Tags -->
    <meta property="og:description" content="VisaPower helps you find visa requirements for any country in seconds. No sign-ups, no hassle—just the info you need.">
    <meta property="og:image" content="og-image.jpg">
    <meta property="og:url" content="https://visapower.shadowlanes.com">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="VisaPower - Check Visa Requirements Instantly">
    <meta name="twitter:description" content="VisaPower helps you find visa requirements for any country in seconds. No sign-ups, no hassle—just the info you need.">
    <meta name="twitter:image" content="og-image.jpg">
    <!-- Open Graph Meta Tags end-->
    <title>VisaPower - Check Your Visa-Free Access</title>
    <!-- <link rel="stylesheet" href="styles.css"> --> <!-- Old stylesheet link -->
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;700&family=Montserrat:wght@400;600;700&family=Quicksand:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <!-- Add jqvmap CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqvmap/1.5.1/jqvmap.min.css">
    <link rel="shortcut icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%233498db' d='M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z'/%3E%3C/svg%3E" type="image/svg+xml">

</head> 
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-passport passport-icon"></i> VisaPower</h1>
            <p>Discover countries you can visit visa-free or with e-visa</p>
        </header>

        <main class="main-container">
            <div class="input-section">
                <div class="input-group">
                    <label for="passport-search"><i class="fas fa-globe-americas"></i> Your Passport Country</label>
                    <!-- This select is now replaced by JS with an input and a results div -->
                    <select id="passport-country" required style="display: none;"> <!-- Keep original for graceful degradation or if JS fails early -->
                        <option value="" disabled selected>Select</option>
                    </select>
                    <!-- JS will insert the search input and results container here -->
                </div> 

                <div class="input-group">
                    <label><i class="fas fa-id-card"></i> Current Visas You Hold (if any)</label>
                    <div id="current-visas" class="checkbox-container">
                        <p class="select-passport-notice">Please select your passport country first</p>
                    </div>
                </div>
            </div>  

            <div class="results-section">
                <div class="results-header">
                    <h2>
                        <i class="fas fa-plane"></i> Countries You Can Visit
                        <span class="disclaimer-tooltip">
                            <i class="fas fa-info-circle"></i>
                            <span class="tooltip-text">Visa regulations change frequently. Always verify with official sources before travel.</span>
                        </span>
                    </h2>
                    <div class="view-toggle">
                        <button id="grid-view-btn" class="view-btn active" title="Grid View">
                            <i class="fas fa-th"></i>
                        </button>
                        <button id="map-view-btn" class="view-btn" title="Map View">
                            <i class="fas fa-map-marked-alt"></i>
                        </button>
                    </div>
                </div>
                
                <div class="results-tabs">
                    <!-- Tabs will be populated/managed by JS, including the "All" tab -->
                    <button class="tab-btn" data-type="visa-free">Visa-Free</button> <!-- JS will make one active -->
                    <button class="tab-btn" data-type="visa-on-arrival">Visa on Arrival</button>
                    <button class="tab-btn" data-type="e-visa">e-Visa</button>
                    <button id="search-countries-btn" class="search-tab-btn" title="Search Countries">
                        <i class="fas fa-search"></i>
                    </button>
                    <div class="inline-search-container">
                        <input type="text" id="inline-country-search" placeholder="Search countries...">
                        <button id="close-inline-search-btn" title="Close search">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
                <!-- Country count display will be inserted here by JS if not present -->
                 <div class="country-count-display"></div>

                <div class="view-container">
                    <div id="grid-view" class="view-content active">
                        <div id="results-container">
                            <p class="empty-state">Select your passport and visas to see available countries</p>
                        </div>
                    </div>
                    
                    <div id="map-view" class="view-content">
                        <div id="world-map"></div>
                        <div class="map-legend">
                            <div class="legend-item"><span class="color-box visa-free"></span>Visa Free</div>
                            <div class="legend-item"><span class="color-box visa-on-arrival"></span>Visa on Arrival</div>
                            <div class="legend-item"><span class="color-box e-visa"></span>e-Visa</div>
                            <div class="legend-item"><span class="color-box no-access"></span>No Access</div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <footer class="simplified-footer">
            <div class="footer-left">
                <p>&copy; 2025 VisaPower. All rights reserved.</p>
            </div>
            <div class="footer-center">
                <p>Made with <i class="fas fa-heart"></i> by <span class="author-name">shadowlanes</span></p>
            </div>
            <div class="footer-right">
                <a href="https://github.com/shadowlanes/visapower" class="github-link" target="_blank" rel="noopener noreferrer">
                    <i class="fab fa-github"></i>
                </a>
            </div>
        </footer>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqvmap/1.5.1/jquery.vmap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqvmap/1.5.1/maps/jquery.vmap.world.js"></script>
    
    <script src="data/schengen-countries.js"></script>
    <script src="data/country-codes.js"></script>
    <!-- Visa data files (consider consolidating or loading dynamically if many) -->
    <script src="data/visa-data/visa-data-in.js"></script>
    <script src="data/visa-data/visa-data-us.js"></script>
    <!-- Core Logic & Components -->
    <script src="visa-data-fetcher.js"></script>
    <script src="map-view.js"></script>
    <!-- Refactored JS Files -->
    <script src="js/utils.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/data_handlers.js"></script>
    <script src="js/search.js"></script>
    <!-- Main application script (formerly app.js) -->
    <script src="app.js"></script> 
    
    <script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "3ad903aeb088488d82a115a7c5a2fd7d"}'></script>
    <script>
        // The inline script for populating dropdown and fetching IP can be removed
        // as passport selection is now handled by a search input within app.js (or its new structure)
        // and default country is set there.
        // If IP-based auto-selection is still desired, that logic would need to be integrated
        // into the new passport handling in app.js.
        // For now, removing this inline script to avoid conflicts.
        /*
        document.addEventListener("DOMContentLoaded", () => {
            const countryDropdown = document.getElementById('passport-country');

            Object.entries(countryCodeMapping).forEach(([countryName, countryCode]) => {
                const option = document.createElement('option');
                option.value = countryCode; // Or countryName if app.js expects names
                option.textContent = countryName;
                countryDropdown.appendChild(option);
            });

            const indianOption = Array.from(countryDropdown.options).find(option => option.textContent === "India");
            if (indianOption) {
                indianOption.selected = true;
                // Trigger change to load visas if app.js relies on this
                // countryDropdown.dispatchEvent(new Event('change')); 
            }
        });
        */
    </script>
</body>
</html>
